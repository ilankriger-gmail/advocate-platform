{
  "discovered_files": {
    "src/actions/challenges.ts, src/actions/rewards.ts, src/actions/events.ts, src/actions/admin.ts": {
      "description": "Admin authorization pattern is duplicated 21 times across 4 action files. Two variations exist: (1) admin OR is_creator check using 'profiles' table (16 times), (2) admin-only check using 'users' table (5 times). Pattern consists of ~12-15 lines: get user, query profile, check permissions, return error.",
      "category": "architecture",
      "discovered_at": "2026-01-07T14:33:59.069238+00:00"
    },
    "src/lib/auth.ts": {
      "description": "Implemented requireAuth() base authentication function that gets user session and profile without permission checks. This is the foundation for requireAdmin() and requireAdminOrCreator() functions. Returns AuthResult (user, profile, supabase) or AuthError.",
      "category": "auth_module",
      "discovered_at": "2026-01-07T14:39:38.718497+00:00"
    }
  },
  "last_updated": "2026-01-07T14:39:38.718509+00:00"
}